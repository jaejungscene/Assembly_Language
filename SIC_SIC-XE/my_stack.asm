MAIN	START	1000

FIRST	JSUB	STKINIT

INPUT	TD	INDEV
	JEQ	INPUT
	LDX	#0
	JSUB	COMMAND
	LDA	#0	.for COMP
	RD	INDEV
	COMP	#0x31	.0x31 = 1
	JEQ	STPUSH
	COMP	#0x32
	JEQ	STPOP
	J	A

STPUSH	JSUB	BUFCLE
	LDX	#0
	JSUB	PUSHCOM
	RD	INDEV
	STCH	@TOP
	JSUB	PUSH
	JSUB	BUFCLE
	J	INPUT

STPOP	JSUB	BUFCLE
	LDX	#0
	JSUB	POP
	JSUB	POPCOM
	LDCH	@TOP
	WD	OUTDEV
	LDA	#0xA
	WD	OUTDEV
	J	INPUT

. FIRST	JSUB	STKINIT
. 	LDA	#1
. 	STA	@TOP
. 	JSUB	PUSH
. 	LDA	#2
. 	STA	@TOP
. 	JSUB	PUSH
. 	LDA	#3
. 	STA	@TOP
. 	JSUB	PUSH

. 	JSUB	POP
. 	LDA	@TOP
. 	STA	OUT1
. 	JSUB	POP
. 	LDA	@TOP
. 	STA	OUT2
. 	JSUB	POP
. 	LDA	@TOP
. 	STA	OUT3

A       J	A

STKINIT	LDA	#STACK
	STA	TOP
	RSUB

PUSH	LDA	TOP
	ADD	#1
	STA	TOP
	RSUB

POP	LDA	TOP
	SUB	#1
	STA	TOP
	RSUB

COMMAND	LDCH	COMSTR,X
	WD	OUTDEV
	TIX	#25
	JLT	COMMAND
	RSUB

PUSHCOM	LDCH	PUSHSTR,X
	WD	OUTDEV
	TIX	#14
	JLT	PUSHCOM
	RSUB

POPCOM	LDCH	POPSTR,X
	WD	OUTDEV
	TIX	#14
	JLT	POPCOM
	RSUB

BUFCLE	LDA	#0	.for COMP
	RD	INDEV
	COMP	#0xA
	JLT	BUFCLE
	JGT	BUFCLE
	RSUB

INDEV	BYTE	0
OUTDEV	BYTE	1
OUT1	RESW	1
OUT2	RESW	1
OUT3	RESW	1
TOP	RESW	1
STACK	RESB	4
COMSTR	BYTE	C'(1)push (2)pop (3)exit >>'
PUSHSTR	BYTE	C'Enter value >>'
POPSTR	BYTE	C'Poped value >>'

